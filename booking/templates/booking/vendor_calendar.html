{% extends "base.html" %}
{% load dict_filters %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-10 px-4">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">Weekly Calendar</h2>

    <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-4">
      {% for day in week_dates %}
        <div class="bg-white shadow-sm border rounded-lg p-4">
          <h3 class="text-sm font-semibold text-gray-700 mb-2">
            {{ day|date:"D, M j" }}
          </h3>

          {% with bookings=bookings_by_day|dict_get:day %}
            {% if bookings %}
              <ul class="space-y-1 text-xs text-gray-600 mb-2">
                {% for b in bookings %}
                  <li>
                    {{ b.time|time:"H:i" }} â€“
                    <span class="
                      {% if b.status == 'confirmed' %}text-green-600
                      {% elif b.status == 'pending' %}text-yellow-600
                      {% elif b.status == 'cancelled' %}text-red-600
                      {% endif %}
                    ">
                      {{ b.get_status_display }}
                    </span>
                  </li>
                {% endfor %}
              </ul>
              <a href="{% url 'vendor_bookings' %}?date={{ day }}" class="text-blue-600 text-sm hover:underline">
                View Details
              </a>
            {% else %}
              <p class="text-gray-400 text-sm">No bookings</p>
            {% endif %}
          {% endwith %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
